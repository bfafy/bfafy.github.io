<!DOCTYPE html>
<html>
  <head>
    <title>在线聊天应用</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
      }
      #chatbox {
        width: 400px;
        height: 300px;
        overflow: auto;
        border: 1px solid #ccc;
        padding: 10px;
      }
      #inputbox {
        margin-top: 10px;
      }
      #message {
        width: 300px;
        padding: 5px;
      }
      #send {
        padding: 5px 10px;
        background-color: #4CAF50;
        color: white;
        border: none;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <div id="chatbox"></div>
    <form id="inputbox">
      <input type="text" id="message" placeholder="输入你的消息...">
      <button type="submit" id="send">发送</button>
    </form>

    <script>
      const socket = new WebSocket('ws://localhost:8080');

      socket.addEventListener('open', () => {
        console.log('Connected to server');
      });

      socket.addEventListener('message', event => {
        console.log(`Received message: ${event.data}`);
        addMessage(event.data);
      });

      socket.addEventListener('error', error => {
        console.error(`WebSocket error: ${error}`);
      });

      socket.addEventListener('close', () => {
        console.log('Disconnected from server');
      });

      const chatbox = document.getElementById('chatbox');
      const messageInput = document.getElementById('message');
      const sendButton = document.getElementById('send');

      sendButton.addEventListener('click', event => {
        event.preventDefault();
        const message = messageInput.value;
        if (message.trim()) {
          socket.send(message);
          addMessage(`Me: ${message}`);
          messageInput.value = '';
        }
      });

      function addMessage(message) {
        const p = document.createElement('p');
        p.innerText = message;
        chatbox.appendChild(p);
      }
    </script>
  </body>
</html>
